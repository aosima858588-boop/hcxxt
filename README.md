# 数据统计脚本说明

用途
- 对你提供的 data.js（包含 injData / usdt45Data / usdtFinanceData）做汇总统计与分析，生成前端所需的 overview、按产品统计、按用户聚合等。

如何使用
1. 将你原始的 data.js 放在仓库根目录（或与脚本同级）。脚本默认读取 `../data.js`（脚本位于 scripts/），如果你把脚本放在仓库根请调整路径或把脚本移到仓库根并修改 `DATA_FILE`。
2. 安装 node（建议 >=14）。
3. 运行：
   - 进入脚本目录并执行：
     - node scripts/analyze.js
   - 或查询某个用户（手机号或会员ID）：
     - node scripts/analyze.js 13392776413

输出
- 控制台会打印总体概览 JSON、按产品汇总表、Top 用户列表、以及（可选）单用户聚合详情。

注意
- 脚本会尝试解析多种日期格式（如 "2026/2/2 13:59"、"1月14日"），并默认把没有年份的日期视为 2026 年（可在脚本中修改 TODAY 或年份假设）。
- 目前没有退款明细，`total_refunded` 默认为 0。如你有退款数据可以把退款表加入并调整脚本来计算已退款金额/到期已退款等。
- 如需把脚本改为后端 API（FastAPI / Express），我可以把它封装为 /api/import（批量导入）与 /api/overview、/api/user 等接口并提交 PR。

下一步建议
- 你希望我直接把该脚本提交到仓库并开一个 PR 吗？还是你希望我把分析结果（运行后的 JSON / top users）直接贴到这里（我需要实际运行脚本 — 需要你允许我在仓库运行或我把结果发给你运行后返回）？
- 是否需要把脚本改为 HTTP API 供前端直接请求？
